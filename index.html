<!-- marshall-ku 님 소스코드 참고 https://github.com/marshall-ku/lottery-->
<!DOCTYPE html>


<html>
    <title>로또 추첨기</title>
    <link rel="stylesheet" href="lotto.css">
    <meta name="viewport" content="width=device-width, height=580, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<body>

    <div id="wrapper">

        <h1 id="title">로또자동추첨기</h1>

        <div id="numbers">

            <!-- <div id="lotto-title">Lotto 6/45</div> -->
            <div id="whatisdate">제 845 회</div>

            <div class="deadline">
                <div id="publish-day">발 행 일: 2020/02/01(수) 14:32:12</div>
                <div id="raffle-day">추 첨 일: 2020/02/01(토)</div>
                <div id="payments-day">지급기한: 2020/02/01</div>
            </div>

            <div class="rannum"> 52103 21927 91023 32219 12839 23155</div>
            <div class="ranco"> HEVLOG 100410047/0000001111</div>


            <script>
                var date = new Date();
                var year = date.getFullYear();
                var month = date.getMonth() + 1;
                var day = date.getDate();
                var hours = date.getHours();
                let minutes = date.getMinutes() > 9 ? date.getMinutes() : "0" + date.getMinutes();
                var seconds = date.getSeconds() > 9 ? date.getSeconds() : "0" + date.getSeconds();
                const week = ['일', '월', '화', '수', '목', '금', '토'];
                const dayOfWeek = week[date.getDay()];
                var publishDay = year + "/" + month + "/" + day + " (" + dayOfWeek + ")" + " " + (hours + ":" + minutes + ":" + seconds);
                // let raffleDay = year + "/" + month + "/" + day + " (" + "토" + ")";
                document.getElementById("publish-day").innerHTML = "발 행 일: " + publishDay;
                // document.getElementById("raffle-day").innerHTML = "추 첨 일: " + raffleDay;
                document.getElementById("payments-day").innerHTML = "지급기한: " + (year + 1)+ "/" + month + "/" + (day+1);


                /* 회차 */
                let sdd = "2020-05-30";
                let edd = year+"-"+month+"-"+day;
                
                let ar1 = sdd.split('-');
                let ar2 = edd.split('-');

                let da1 = new Date(ar1[0], ar1[1], ar1[2]);
                let da2 = new Date(ar2[0], ar2[1], ar2[2]);
                let dif = da2 - da1;
                let cDay = 24 * 60 * 60 * 1000;

                let result = parseInt(dif/cDay);
                let round = Math.floor(result / 7) + 914;
                document.getElementById("whatisdate").innerText = "제 "+ round +"회";


                /* 추첨일 */
                let r_add = (Math.floor(result / 7) + 1) * 7;

                let r_addDate = new Date(2020,4,30);
                r_addDate.setDate(r_addDate.getDate()+r_add);

                let r_year = r_addDate.getFullYear(); // 년도
                let r_month = ("0" + (r_addDate.getMonth() + 1)).slice(-2);  // 월
                let r_date = ("0" + r_addDate.getDate()).slice(-2);

                let r_dayday = ['일','월','화','수','목','금','토'];
                let r_day = r_addDate.getDay();
                let r_st = "추 첨 일 : "+r_year+"/"+r_month+"/"+r_date+" ("+r_dayday[r_day]+")";
                document.getElementById("raffle-day").innerText = r_st;
            
            </script>

<div style="background: url(//i1.daumcdn.net/deco/contents/horizontalrule/line05.gif?v=2) repeat-x scroll left;  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;width: 98%;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;height: 16px;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;position: relative;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;left: -7px;;;;;;;;;;;;;;;;;;;;;;;;;"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>            <!-- <div class="구분선1">
                ----------------------------------------
            </div> -->
          
            <div class="list-sum">

            <div class="lotto-listA">
                <div class="lotto-A">A</div>
                <div class="lotto-tag">자동</div>
                <div class="ball a">?</div>
                <div class="ball b">?</div>
                <div class="ball c">?</div>
                <div class="ball d">?</div>
                <div class="ball e">?</div>
                <div class="ball f">?</div>
            </div>

            <div class="lotto-listA">
                <div class="lotto-A">B</div>
                <div class="lotto-tag">자동</div>
                <div class="ball g">?</div>
                <div class="ball h">?</div>
                <div class="ball i">?</div>
                <div class="ball j">?</div>
                <div class="ball k">?</div>
                <div class="ball l">?</div>
            </div>
            <div class="lotto-listA">
                <div class="lotto-A">C</div>
                <div class="lotto-tag">자동</div>
                <div class="ball m">?</div>
                <div class="ball n">?</div>
                <div class="ball o">?</div>
                <div class="ball p">?</div>
                <div class="ball q">?</div>
                <div class="ball r">?</div>
            </div>
            <div class="lotto-listA">
                <div class="lotto-A">D</div>
                <div class="lotto-tag">자동</div>
                <div class="ball s">?</div>
                <div class="ball t">?</div>
                <div class="ball u">?</div>
                <div class="ball v">?</div>
                <div class="ball w">?</div>
                <div class="ball x">?</div>
            </div>
            <div class="lotto-listA">
                <div class="lotto-A">E</div>
                <div class="lotto-tag">자동</div>
                <div class="ball y">?</div>
                <div class="ball z">?</div>
                <div class="ball 1">?</div>
                <div class="ball 2">?</div>
                <div class="ball 3">?</div>
                <div class="ball 4">?</div>
            </div>


        </div>
        <div style="background: url(//i1.daumcdn.net/deco/contents/horizontalrule/line05.gif?v=2) repeat-x scroll left;  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;width: 98%;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;height: 16px;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;position: relative;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;left: -7px;;;;;;;;;;;;;;;;;;;;;;;;;"><hr style="border: black 0 none; left: -9999px; position: relative; top: -9999px"></div>        <!-- <div class="구분선2">
            ----------------------------------------
        </div>  -->
        
        <div class="금액">
            금액                           ￦5,000
        </div>
<br>
        <div class="블로그">
            https://hstory0208.tistory.com
        </div>
        <!-- <div class="바코드">
            <img src="바코드3.png" alt="barcode">
        </div>
   -->
        </div>
        <button id="lotto-2-button">추첨하기</button>
    </div>

    <script>
        const btn = document.getElementById("lotto-2-button");
        let tmp = 1,
        numbers;
        let double_ary = [[], [], [], [], []];
        let list_index = 0;

  function getindex(c) {
  let d = 0;
  for (d; (c = c.previousElementSibling); d++);
  return d;
}

function lottery() {

    let random;
    list_index = 0;

    for(let i=0; i<5; i++){
        numbers = [1,2,3,4,5,6,7,8,9,10,
            11,12,13,14,15,16,17,18,19,20,
            21,22,23,24,25,26,27,28,29,30,
            31,32,33,34,35,36,37,38,39,40,
            41,42,43,44,45];
        for(let j=0; j<6; j++){
            random = Math.floor(Math.random() *  numbers.length);
            double_ary[i][j] = numbers[random];
            numbers.splice(random, 1)
        }
        
        var h,t, index;
        var tmp;
        for(h=0; h<5; h++){
            index = h;
            for(t = h+1; t<6; t++){
                if(double_ary[i][index] > double_ary[i][t]) index = t;
            }
            tmp = double_ary[i][h];
            double_ary[i][h] = double_ary[i][index];
            double_ary[i][index] = tmp;
        }
    }

    
    Array.from(document.querySelectorAll(".ball")).forEach(a => {
        a.classList.remove("done"),
        decryptEffect(a, getindex(a))
    })
}

function decryptEffect(elem, time) {
    elem.classList.add("done")
    elem.innerText = double_ary[list_index][time-2];

if(time == 7){
    list_index++;
}

}

btn.addEventListener("click", function () {
  tmp === 1 &&
    ((tmp = 0),
    btn.classList.add("hide"),
    lottery(),
    setTimeout(function () {
      (tmp = 1), btn.classList.remove("hide");
    }, 1000));
});



    </script>

    <!-- <script src="lotto.js"></script> -->


    
</body>

    </html>
